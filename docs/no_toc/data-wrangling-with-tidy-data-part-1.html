<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Wrangling with Tidy Data, Part 1 | Introduction to R, Season 2</title>
  <meta name="description" content="Chapter 4 Data Wrangling with Tidy Data, Part 1 | Introduction to R, Season 2" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Wrangling with Tidy Data, Part 1 | Introduction to R, Season 2" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Wrangling with Tidy Data, Part 1 | Introduction to R, Season 2" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/dasl_favicon.ico" type="image/x-icon" />
<link rel="prev" href="working-with-data-structures.html"/>
<link rel="next" href="data-wrangling-with-tidy-data-part-2.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="https://hutchdatascience.org/" target="_blank"><img src="assets/big-dasl-stacked.png" style="width: 80%; padding-left: 34px; padding-top: 8px;"</a>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About this Course</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#curriculum"><i class="fa fa-check"></i><b>1.1</b> Curriculum</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#target-audience"><i class="fa fa-check"></i><b>1.2</b> Target Audience</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-computing.html"><a href="intro-to-computing.html"><i class="fa fa-check"></i><b>2</b> Intro to Computing</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro-to-computing.html"><a href="intro-to-computing.html#goals-of-the-course"><i class="fa fa-check"></i><b>2.1</b> Goals of the course</a></li>
<li class="chapter" data-level="2.2" data-path="intro-to-computing.html"><a href="intro-to-computing.html#what-is-a-computer-program"><i class="fa fa-check"></i><b>2.2</b> What is a computer program?</a></li>
<li class="chapter" data-level="2.3" data-path="intro-to-computing.html"><a href="intro-to-computing.html#a-programming-language-has-following-elements"><i class="fa fa-check"></i><b>2.3</b> A programming language has following elements:</a></li>
<li class="chapter" data-level="2.4" data-path="intro-to-computing.html"><a href="intro-to-computing.html#what-is-r-and-why-should-i-use-it"><i class="fa fa-check"></i><b>2.4</b> What is R and why should I use it?</a></li>
<li class="chapter" data-level="2.5" data-path="intro-to-computing.html"><a href="intro-to-computing.html#r-vs.-python-as-a-first-language"><i class="fa fa-check"></i><b>2.5</b> R vs. Python as a first language</a></li>
<li class="chapter" data-level="2.6" data-path="intro-to-computing.html"><a href="intro-to-computing.html#posit-cloud-setup"><i class="fa fa-check"></i><b>2.6</b> Posit Cloud Setup</a></li>
<li class="chapter" data-level="2.7" data-path="intro-to-computing.html"><a href="intro-to-computing.html#using-quarto-for-your-work"><i class="fa fa-check"></i><b>2.7</b> Using Quarto for your work</a></li>
<li class="chapter" data-level="2.8" data-path="intro-to-computing.html"><a href="intro-to-computing.html#grammar-structure-1-evaluation-of-expressions"><i class="fa fa-check"></i><b>2.8</b> Grammar Structure 1: Evaluation of Expressions</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="intro-to-computing.html"><a href="intro-to-computing.html#data-types"><i class="fa fa-check"></i><b>2.8.1</b> Data types</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="intro-to-computing.html"><a href="intro-to-computing.html#grammar-structure-2-storing-data-types-in-the-global-environment"><i class="fa fa-check"></i><b>2.9</b> Grammar Structure 2: Storing data types in the global environment</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="intro-to-computing.html"><a href="intro-to-computing.html#execution-rule-for-variable-assignment"><i class="fa fa-check"></i><b>2.9.1</b> Execution rule for variable assignment</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="intro-to-computing.html"><a href="intro-to-computing.html#grammar-structure-3-evaluation-of-functions"><i class="fa fa-check"></i><b>2.10</b> Grammar Structure 3: Evaluation of Functions</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="intro-to-computing.html"><a href="intro-to-computing.html#execution-rule-for-functions"><i class="fa fa-check"></i><b>2.10.1</b> Execution rule for functions:</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="intro-to-computing.html"><a href="intro-to-computing.html#tips-on-exercises-debugging"><i class="fa fa-check"></i><b>2.11</b> Tips on Exercises / Debugging</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html"><i class="fa fa-check"></i><b>3</b> Working with data structures</a>
<ul>
<li class="chapter" data-level="3.1" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html#vectors"><i class="fa fa-check"></i><b>3.1</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html#using-operations-on-vectors"><i class="fa fa-check"></i><b>3.1.1</b> Using operations on vectors</a></li>
<li class="chapter" data-level="3.1.2" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html#subsetting-vectors-explicitly"><i class="fa fa-check"></i><b>3.1.2</b> Subsetting vectors explicitly</a></li>
<li class="chapter" data-level="3.1.3" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html#subsetting-vectors-implicitly"><i class="fa fa-check"></i><b>3.1.3</b> Subsetting vectors implicitly</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html#dataframes"><i class="fa fa-check"></i><b>3.2</b> Dataframes</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html#using-functions-and-operations-on-dataframes"><i class="fa fa-check"></i><b>3.2.1</b> Using functions and operations on dataframes</a></li>
<li class="chapter" data-level="3.2.2" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html#what-do-you-want-to-do-with-this-dataframe"><i class="fa fa-check"></i><b>3.2.2</b> “What do you want to do with this dataframe”?</a></li>
<li class="chapter" data-level="3.2.3" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html#filter-rows"><i class="fa fa-check"></i><b>3.2.3</b> Filter rows</a></li>
<li class="chapter" data-level="3.2.4" data-path="working-with-data-structures.html"><a href="working-with-data-structures.html#select-columns"><i class="fa fa-check"></i><b>3.2.4</b> Select columns</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling with Tidy Data, Part 1</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#functions-deep-dive"><i class="fa fa-check"></i><b>4.1</b> Functions deep dive</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#anatomy-of-a-function-definition"><i class="fa fa-check"></i><b>4.1.1</b> Anatomy of a function definition</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#local-and-global-environments"><i class="fa fa-check"></i><b>4.1.2</b> Local and global environments</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#a-step-by-step-example"><i class="fa fa-check"></i><b>4.1.3</b> A step-by-step example</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#function-arguments-create-modularity"><i class="fa fa-check"></i><b>4.1.4</b> Function arguments create modularity</a></li>
<li class="chapter" data-level="4.1.5" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#exercises"><i class="fa fa-check"></i><b>4.1.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#pipes"><i class="fa fa-check"></i><b>4.2</b> Pipes</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#exercises-1"><i class="fa fa-check"></i><b>4.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#modifying-and-creating-new-columns-in-dataframes"><i class="fa fa-check"></i><b>4.3</b> Modifying and creating new columns in dataframes</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#all-together-now"><i class="fa fa-check"></i><b>4.3.1</b> All together now</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-wrangling-with-tidy-data-part-1.html"><a href="data-wrangling-with-tidy-data-part-1.html#alternative-creating-and-modifying-columns-via"><i class="fa fa-check"></i><b>4.3.2</b> Alternative: Creating and modifying columns via <code>$</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html"><i class="fa fa-check"></i><b>5</b> Data Wrangling with Tidy Data, Part 2</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html#datasets-within-depmap-project"><i class="fa fa-check"></i><b>5.1</b> Datasets within DepMap Project</a></li>
<li class="chapter" data-level="5.2" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html#data-science-workflow"><i class="fa fa-check"></i><b>5.2</b> Data Science Workflow</a></li>
<li class="chapter" data-level="5.3" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html#describing-a-tidy-dataset"><i class="fa fa-check"></i><b>5.3</b> Describing a tidy dataset</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html#examples-of-tidy-data"><i class="fa fa-check"></i><b>5.3.1</b> Examples of Tidy data</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html#transform"><i class="fa fa-check"></i><b>5.4</b> Transform</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html#the-rows-and-columns-i-need-can-be-subsetted-from-the-dataframe."><i class="fa fa-check"></i><b>5.4.1</b> “The rows and columns I need can be subsetted from the dataframe.”</a></li>
<li class="chapter" data-level="5.4.2" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html#the-column-i-want-is-an-operation-or-function-of-other-columns-i-already-have-in-the-dataframe."><i class="fa fa-check"></i><b>5.4.2</b> “The column I want is an operation or function of other columns I already have in the dataframe.”</a></li>
<li class="chapter" data-level="5.4.3" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html#the-columns-that-i-need-are-in-two-different-dataframes-with-a-common-column.-the-rows-observations-of-both-dataframes-represent-the-same-thing."><i class="fa fa-check"></i><b>5.4.3</b> “The columns that I need are in two different dataframes with a common column. The rows (observations) of both dataframes represent the same thing.”</a></li>
<li class="chapter" data-level="5.4.4" data-path="data-wrangling-with-tidy-data-part-2.html"><a href="data-wrangling-with-tidy-data-part-2.html#the-rows-i-want-is-described-by-a-column.-the-columns-i-want-need-to-be-summarized-from-other-columns."><i class="fa fa-check"></i><b>5.4.4</b> “The rows I want is described by a column. The columns I want need to be summarized from other columns.”</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>6</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-visualization.html"><a href="data-visualization.html#common-plots"><i class="fa fa-check"></i><b>6.1</b> Common Plots</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-visualization.html"><a href="data-visualization.html#univariate"><i class="fa fa-check"></i><b>6.1.1</b> Univariate</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-visualization.html"><a href="data-visualization.html#bivariate"><i class="fa fa-check"></i><b>6.1.2</b> Bivariate</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-visualization.html"><a href="data-visualization.html#grammar-of-graphics"><i class="fa fa-check"></i><b>6.2</b> Grammar of Graphics</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data-visualization.html"><a href="data-visualization.html#histogram"><i class="fa fa-check"></i><b>6.2.1</b> Histogram</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-visualization.html"><a href="data-visualization.html#bar-plots"><i class="fa fa-check"></i><b>6.2.2</b> Bar plots</a></li>
<li class="chapter" data-level="6.2.3" data-path="data-visualization.html"><a href="data-visualization.html#scatterplot"><i class="fa fa-check"></i><b>6.2.3</b> Scatterplot</a></li>
<li class="chapter" data-level="6.2.4" data-path="data-visualization.html"><a href="data-visualization.html#multivaraite-scatterplot"><i class="fa fa-check"></i><b>6.2.4</b> Multivaraite Scatterplot</a></li>
<li class="chapter" data-level="6.2.5" data-path="data-visualization.html"><a href="data-visualization.html#multivaraite-scatterplot-1"><i class="fa fa-check"></i><b>6.2.5</b> Multivaraite Scatterplot</a></li>
<li class="chapter" data-level="6.2.6" data-path="data-visualization.html"><a href="data-visualization.html#line-plot"><i class="fa fa-check"></i><b>6.2.6</b> Line plot?</a></li>
<li class="chapter" data-level="6.2.7" data-path="data-visualization.html"><a href="data-visualization.html#grouped-line-plot"><i class="fa fa-check"></i><b>6.2.7</b> Grouped Line plot?</a></li>
<li class="chapter" data-level="6.2.8" data-path="data-visualization.html"><a href="data-visualization.html#boxplot"><i class="fa fa-check"></i><b>6.2.8</b> Boxplot</a></li>
<li class="chapter" data-level="6.2.9" data-path="data-visualization.html"><a href="data-visualization.html#grouped-boxplot"><i class="fa fa-check"></i><b>6.2.9</b> Grouped Boxplot</a></li>
<li class="chapter" data-level="6.2.10" data-path="data-visualization.html"><a href="data-visualization.html#some-additional-options"><i class="fa fa-check"></i><b>6.2.10</b> Some additional options</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data-visualization.html"><a href="data-visualization.html#summary-of-options"><i class="fa fa-check"></i><b>6.3</b> Summary of options</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="7" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>7</b> References</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by: </a> </p>
<p style="text-align:center;"> <a href="https://hutchdatascience.org/"> The Fred Hutch Data Science Lab </a></p>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
<p style="padding-left: 40px;"><div class="trapezoid" style = "padding-left: 40px;"><span>  <a href="https://forms.gle/W6Mg4rzuMK6Yk3Am8"> Click here to provide feedback</a> <img src="assets/itcr_arrow.png" style=" width: 10%" ></span></div></p>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R, Season 2</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
  <link href="assets/style.css" rel="stylesheet">
</head>
        


<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/dasl_thin_main_image.png">
</div>
<div id="data-wrangling-with-tidy-data-part-1" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data Wrangling with Tidy Data, Part 1</h1>
<p>Today, we will understand deeply how functions work, and continue learning more functions on dataframes.</p>
<div id="functions-deep-dive" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Functions deep dive</h2>
<div class="figure">
<img src="https://cs.wellesley.edu/~cs110/lectures/L16/images/function.png" alt="" />
<p class="caption">Function machine from algebra class.</p>
</div>
<p>We write functions for two main, often overlapping, reasons:</p>
<ol style="list-style-type: decimal">
<li><p>Following DRY (Don’t Repeat Yourself) principle: If you find yourself repeating similar patterns of code, you should write a function that executes that pattern. This saves time and the risk of mistakes.</p></li>
<li><p>Create modular structure and abstraction: Having all of your code in one place becomes increasingly complicated as your program grows. Think of the function as a mini-program that can perform without the rest of the program. Organizing your code by functions gives modular structure, as well as abstraction: you only need to know the function name, inputs, and output to use it and don’t have to worry how it works.</p></li>
</ol>
<p>Some advice on writing functions:</p>
<ul>
<li><p>Code that has a well-defined set of inputs and outputs make a good function.</p></li>
<li><p>A function should do only one, well-defined task.</p></li>
</ul>
<div id="anatomy-of-a-function-definition" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Anatomy of a function definition</h3>
<p>Recall that a function has a function name, input arguments, and a return value.</p>
<p><em>Function definition consists of assigning a <strong>function name</strong> with a “function” statement that has a comma-separated list of named <strong>function arguments</strong>, and a <strong>return expression</strong>. The function name is stored as a variable in the global environment.</em></p>
<p>In order to use the function, one defines or import it, then one calls it.</p>
<p>Example:</p>
<pre><code>addFunction = function(argument1, argument2) {
  result = argument1 + argument2 
  return(result)
}
z = addFunction(3, 4)</code></pre>
<p>With function definitions, not all code runs from top to bottom. The first four lines defines the function, but the function is never run. It is called on line 5, and the lines within the function are executed.</p>
<p>When the function is called in line 5, the variables for the arguments are reassigned to function arguments to be used within the function and helps with the modular form. We need to introduce the concept of local and global environments to distinguish variables used only for a function from variables used for the entire program.</p>
<p>Some syntax equivalents on calling the function:</p>
<pre><code>addFunction(3, 4)
addFunction(argument1 = 3, argument2 = 4)
addFunction(argument2 = 4, argument1 = 3)</code></pre>
<p>but this <em>could</em> be different:</p>
<pre><code>addFunction(4, 3)</code></pre>
</div>
<div id="local-and-global-environments" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Local and global environments</h3>
<p><em>{ } represents variable scoping: within each { }, if variables are defined, they are stored in a <strong>local environment</strong>, and is only accessible within { }. All function arguments are stored in the local environment. The overall environment of the program is called the <strong>global environment</strong> and can be also accessed within { }.</em></p>
<p>The reason of having some of this “privacy” in the local environment is to make functions modular - they are independent little tools that should not interact with the rest of the global environment. Imagine someone writing a tool that they want to give someone else to use, but the tool depends on your environment, vice versa.</p>
</div>
<div id="a-step-by-step-example" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> A step-by-step example</h3>
<p>Using the <code>addFunction</code> function, let’s see step-by-step how the R interpreter understands our code:</p>
<div class="figure">
<img src="images/function1.png" alt="" />
<p class="caption">We define the function in the global environment.</p>
</div>
<div class="figure">
<img src="images/function2.png" alt="" />
<p class="caption">We call the function, and the function arguments 3, 4 are assigned to argument1 and argument2, respectively in the function’s local environment.</p>
</div>
<div class="figure">
<img src="images/function3.png" alt="" />
<p class="caption">We run the first line of code in the function body. The new variable “result” is stored in the local environment because it is within { }.</p>
</div>
<div class="figure">
<img src="images/function4.png" alt="" />
<p class="caption">We run the second line of code in the function body to return a value.</p>
</div>
<div class="figure">
<img src="images/function5.png" alt="" />
<p class="caption">The return value from the function is assigned to the variable z in the global environment. All local variables for the function are erased now that the function call is over.</p>
</div>
</div>
<div id="function-arguments-create-modularity" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Function arguments create modularity</h3>
<p>First time writers of functions might ask: why are variables we use for the arguments of a function <em>reassigned</em> for function arguments in the local environment? Here is an example when that process is skipped - what are the consequences?</p>
<pre><code>x = 3
y = 4
addFunction = function(argument1, argument2) {
    result = x + y 
    return(result)
}
z = addFunction(x, y)
w = addFunction(10, -5)</code></pre>
<p>What do you expect the value of <code>z</code> to be? How about <code>w</code>?</p>
<p>Here is the execution for <code>w</code>:</p>
<div class="figure">
<img src="images/function6.png" alt="" />
<p class="caption">We define the variables and function in the global environment.</p>
</div>
<p><img src="images/function7.png" alt="We call the function, and the function arguments 10, -5 are assigned to argument1 and argument2, respectively in the function&#39;s local environment." /> <img src="images/function8.png" alt="We run the first line of code in the function body. The new variable “result” is stored in the local environment because it is within { }." /></p>
<div class="figure">
<img src="images/function9.png" alt="" />
<p class="caption">We run the second line of code in the function body to return a value.</p>
</div>
<div class="figure">
<img src="images/function10.png" alt="" />
<p class="caption">The return value from the function is assigned to the variable w in the global environment. All local variables for the function are erased now that the function call is over.</p>
</div>
<p>The function did not work as expected because we used hard-coded variables from the global environment and not function argument variables unique to the function use!</p>
</div>
<div id="exercises" class="section level3" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> Exercises</h3>
<ul>
<li><p>Create a function, called <code>add_and_raise_power</code> in which the function takes in 3 numeric arguments. The function computes the following: the first two arguments are added together and raised to a power determined by the 3rd argument. The function returns the resulting value. Here is a use case: <code>add_and_raise_power(1, 2, 3) = 9</code> because the function will return this expression: <code>(1 + 2) ^ 3</code>. Another use case: <code>add_and_raise_power(3, 1, 2) = 16</code> because of the expression <code>(3 + 1) ^ 2</code>. Confirm with that these use cases work.</p></li>
<li><p>Create a function, called <code>my_dim</code> in which the function takes in one argument: a dataframe. The function returns the following: a length-2 numeric vector in which the first element is the number of rows in the dataframe, and the second element is the number of columns in the dataframe. Your result should be identical as the <code>dim</code> function. How can you leverage existing functions such as <code>nrow</code> and <code>ncol</code>? Use case: <code>my_dim(metadata) = c(1864, 30)</code></p></li>
<li><p>Create a function, called <code>medicaid_eligible</code> in which the function takes in one argument: a numeric vector called <code>age</code>. The function returns a numeric vector with the same length as <code>age</code>, in which elements are <code>0</code> for indicies that are less than 65 in <code>age</code>, and <code>1</code> for indicies 65 or higher in <code>age</code>. Use cases: <code>medicaid_eligible(c(30, 70)) = c(0, 1)</code></p></li>
</ul>
</div>
</div>
<div id="pipes" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Pipes</h2>
<p>Sometimes, in data analysis, we want to transform our dataframe in multiple steps via different functions. In your exercise, you started combining <code>filter()</code> and <code>select()</code> using one line of code:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="data-wrangling-with-tidy-data-part-1.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb80-2"><a href="data-wrangling-with-tidy-data-part-1.html#cb80-2" aria-hidden="true" tabindex="-1"></a>metadata <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://github.com/fhdsl/Intro_to_R/raw/main/classroom_data/CCLE_metadata.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-wrangling-with-tidy-data-part-1.html#cb81-1" aria-hidden="true" tabindex="-1"></a>breast_metadata <span class="ot">=</span> <span class="fu">select</span>(<span class="fu">filter</span>(metadata, OncotreeLineage <span class="sc">==</span> <span class="st">&quot;Breast&quot;</span>), ModelID, Age, Sex)</span></code></pre></div>
<p>This is a bit hard to read. A computer doesn’t care how difficult it is to read this line of code, but there is a lot of instructions going on in one line of code. This multi-step function composition will lead to an unreadable pattern such as:</p>
<pre><code>result = function3(function2(function1(dataframe, df_col4, df_col2), arg2), df_col5, arg1)</code></pre>
<p>To untangle this, you have to look into the middle of this code, and slowly step out of it.</p>
<p>To make this more readable, programmers came up with an alternative syntax for function composition via the <strong>pipe</strong> metaphor. The ideas is that we push data through a chain of connected pipes, in which the output of a pipe becomes the input of the subsequent pipe.</p>
<p>Instead of a syntax like <code>result2 = function3(function2(function1(dataframe)))</code>,</p>
<p>we linearize it with the <code>%&gt;%</code> symbol: <code>result2 = dataframe %&gt;% function1 %&gt;% function2 %&gt;% function3</code>.</p>
<p>In the previous example,</p>
<pre><code>result = dataframe %&gt;% function1(df_col4, df_col2) %&gt;%
         function2(arg2) %&gt;%
         function3(df_col5, arg1)</code></pre>
<p>Looks much easier to read. Notice that we have broken up one expression in to three lines of code for readability. If a line of code is incomplete (the first line of code is piping to somewhere unfinished), the R will treat the next line of code as part of the current line of code.</p>
<div id="exercises-1" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Exercises</h3>
<ul>
<li>Rewrite the <code>select()</code> and <code>filter()</code> function composition example above using the pipe metaphor and syntax.</li>
</ul>
</div>
</div>
<div id="modifying-and-creating-new-columns-in-dataframes" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Modifying and creating new columns in dataframes</h2>
<p>To put together what we have learned today, we will modify and create new columns in dataframes.</p>
<p>The <code>mutate()</code> function takes in the following arguments: the first argument is the dataframe of interest, and the second argument is a new or existing data variable that is defined in terms of other data variables.</p>
<p>We create a new column <code>newAge</code> that is 10 years older than the original <code>Age</code> column.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="data-wrangling-with-tidy-data-part-1.html#cb84-1" aria-hidden="true" tabindex="-1"></a>metadata<span class="sc">$</span>Age[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>##  [1] 60 36 72 30 30 64 63 56 72 53</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-wrangling-with-tidy-data-part-1.html#cb86-1" aria-hidden="true" tabindex="-1"></a>metadata2 <span class="ot">=</span> <span class="fu">mutate</span>(metadata, <span class="at">newAge =</span> Age <span class="sc">+</span> <span class="dv">10</span>)</span>
<span id="cb86-2"><a href="data-wrangling-with-tidy-data-part-1.html#cb86-2" aria-hidden="true" tabindex="-1"></a>metadata2<span class="sc">$</span>newAge[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>##  [1] 70 46 82 40 40 74 73 66 82 63</code></pre>
<p>or <code>medicaid_eligible()</code>:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="data-wrangling-with-tidy-data-part-1.html#cb88-1" aria-hidden="true" tabindex="-1"></a>medicaid_eligible <span class="ot">=</span> <span class="cf">function</span>(age) {</span>
<span id="cb88-2"><a href="data-wrangling-with-tidy-data-part-1.html#cb88-2" aria-hidden="true" tabindex="-1"></a>  age[age <span class="sc">&lt;</span> <span class="dv">65</span>] <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb88-3"><a href="data-wrangling-with-tidy-data-part-1.html#cb88-3" aria-hidden="true" tabindex="-1"></a>  age[age <span class="sc">&gt;=</span> <span class="dv">65</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb88-4"><a href="data-wrangling-with-tidy-data-part-1.html#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(age)</span>
<span id="cb88-5"><a href="data-wrangling-with-tidy-data-part-1.html#cb88-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb88-6"><a href="data-wrangling-with-tidy-data-part-1.html#cb88-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-7"><a href="data-wrangling-with-tidy-data-part-1.html#cb88-7" aria-hidden="true" tabindex="-1"></a>metadata<span class="sc">$</span>Age[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>##  [1] 60 36 72 30 30 64 63 56 72 53</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="data-wrangling-with-tidy-data-part-1.html#cb90-1" aria-hidden="true" tabindex="-1"></a>metadata2 <span class="ot">=</span> <span class="fu">mutate</span>(metadata, <span class="at">medicaid =</span> <span class="fu">medicaid_eligible</span>(Age))</span>
<span id="cb90-2"><a href="data-wrangling-with-tidy-data-part-1.html#cb90-2" aria-hidden="true" tabindex="-1"></a>metadata2<span class="sc">$</span>medicaid[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>##  [1] 0 0 1 0 0 0 0 0 1 0</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="data-wrangling-with-tidy-data-part-1.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(metadata2<span class="sc">$</span>medicaid)</span></code></pre></div>
<pre><code>## 
##    0    1 
## 1148  348</code></pre>
<div id="all-together-now" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> All together now</h3>
<p>Let’s put all of our analysis together via pipes:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="data-wrangling-with-tidy-data-part-1.html#cb94-1" aria-hidden="true" tabindex="-1"></a>breast_metadata <span class="ot">=</span> metadata <span class="sc">%&gt;%</span> <span class="fu">filter</span>(OncotreeLineage <span class="sc">==</span> <span class="st">&quot;Breast&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb94-2"><a href="data-wrangling-with-tidy-data-part-1.html#cb94-2" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">select</span>(ModelID, Age, Sex) <span class="sc">%&gt;%</span></span>
<span id="cb94-3"><a href="data-wrangling-with-tidy-data-part-1.html#cb94-3" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">mutate</span>(<span class="at">medicaid =</span> <span class="fu">medicaid_eligible</span>(Age))</span>
<span id="cb94-4"><a href="data-wrangling-with-tidy-data-part-1.html#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="data-wrangling-with-tidy-data-part-1.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_metadata)</span></code></pre></div>
<pre><code>##      ModelID Age    Sex medicaid
## 1 ACH-000017  43 Female        0
## 2 ACH-000019  69 Female        1
## 3 ACH-000028  69 Female        1
## 4 ACH-000044  47 Female        0
## 5 ACH-000097  63 Female        0
## 6 ACH-000111  41 Female        0</code></pre>
</div>
<div id="alternative-creating-and-modifying-columns-via" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Alternative: Creating and modifying columns via <code>$</code></h3>
<p>Instead of <code>mutate()</code> function, we can also create a new or modify a column via the <code>$</code> symbol:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="data-wrangling-with-tidy-data-part-1.html#cb96-1" aria-hidden="true" tabindex="-1"></a>metadata<span class="sc">$</span>medicaid <span class="ot">=</span> <span class="fu">medicaid_eligible</span>(metadata<span class="sc">$</span>Age)</span></code></pre></div>

</div>
</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
      <a href="https://hutchdatascience.org/" target="_blank"><img src="https://hutchdatascience.org/images/crazy-idea-wide.png" style="width: 80%; padding-left: 15px; padding-top: 8px;"</a>
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-data-structures.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-wrangling-with-tidy-data-part-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
